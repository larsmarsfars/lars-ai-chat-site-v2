<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lars • Chat Portfolio</title>
  <meta name="description" content="A written, irreverent, one-paragraph GPT-led portfolio.">
  <style>
    :root{
      --bg:#0c0c0d; --card:#141416; --ink:#e9e9ec; --muted:#9a9aa0; --accent:#7dd4fc; --line:#232327; --chip:#1b1b1f;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--ink);font:14px/1.6 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    a{color:inherit}
    header{position:sticky;top:0;background:#0c0c0dc0;backdrop-filter:blur(8px);border-bottom:1px solid var(--line)}
    .wrap{max-width:980px;margin:0 auto;padding:14px 18px}
    .row{display:grid;gap:16px;grid-template-columns:1fr}
    @media(min-width:900px){.row{grid-template-columns:1.6fr .9fr}}
    .brand{display:flex;align-items:center;gap:10px}
    .badge{height:34px;width:34px;border-radius:10px;background:#e9e9ec;color:#0c0c0d;display:grid;place-items:center;font-weight:800}
    .title{font-weight:700}
    .sub{font-size:12px;color:var(--muted)}
    .nav a{display:inline-block;padding:6px 10px;border:1px solid var(--line);border-radius:8px;text-decoration:none;margin-left:6px;background:transparent}
    .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:14px}
    h1{font-size:18px;margin:0 0 8px}
    .chips{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0}
    .chip{padding:8px 12px;border-radius:999px;border:1px solid var(--line);background:var(--chip);cursor:pointer;color:var(--ink)}
    textarea{width:100%;min-height:80px;background:#0f0f12;color:var(--ink);border:1px solid var(--line);border-radius:10px;padding:10px;font:inherit}
    button.primary{background:var(--ink);color:#0c0c0d;border:none;padding:10px 14px;border-radius:10px;font-weight:700}
    button.outline{background:transparent;color:var(--ink);border:1px solid var(--line);padding:8px 12px;border-radius:10px}
    .chat{height:52vh;overflow:auto;display:flex;flex-direction:column;gap:10px;padding:6px}
    .msg{display:flex;gap:8px}
    .dot{height:26px;width:26px;border-radius:8px;display:grid;place-items:center;color:#0c0c0d;font-weight:800}
    .assistant{background:var(--accent)}
    .user{background:#7ee787}
    .muted{color:var(--muted)}
    .sources{margin-top:6px;font-size:12px;color:#7a7a83}
    .media{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px}
    .media img{width:100%;height:160px;object-fit:cover;border-radius:10px;border:1px solid var(--line);background:#08080a}
    .bar{display:flex;justify-content:space-between;align-items:center;gap:8px;margin-top:8px}
    .pill{border:1px solid var(--line);padding:4px 8px;border-radius:999px;font-size:12px;color:var(--muted)}
    .banner{display:none;background:#17171a;border:1px solid var(--line);padding:8px 10px;border-radius:10px;color:#bdbdc5;font-size:12px}
  </style>
</head>
<body>
  <header>
    <div class="wrap" style="display:flex;align-items:center;justify-content:space-between;gap:12px">
      <div class="brand"><div class="badge">LJ</div><div><div class="title">Lars Jorgensen</div><div class="sub">Creative Director / ECD · Lisbon, Portugal</div></div></div>
      <nav class="nav"><a href="https://larsmarsjorgensen.com" target="_blank">Website</a><a href="mailto:larsandnikki@twoandahalfvikings.com">Contact</a></nav>
    </div>
  </header>
  <main class="wrap" style="padding:20px 18px 48px">
    <section class="row">
      <div>
        <h1>Chat, but make it writing-first.</h1>
        <p class="muted">Short irreverent answers, one paragraph at a time. Ask directly or tap a chip.</p>

        <div class="card">
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:6px">
            <div>
              <div class="sub">Engine</div>
              <div class="chips"><button class="chip" id="engine-fn">Netlify Function</button><button class="chip" id="engine-openai">OpenAI (paste key)</button><button class="chip" id="engine-local">Local</button></div>
            </div>
            <div>
              <div class="sub">Reality</div>
              <div class="chips"><span class="chip" id="mode-factual">Factual</span><span class="chip" id="mode-playful">Playful</span><span class="chip" id="mode-absurd">Absurd*</span></div>
            </div>
          </div>

          <div id="banner" class="banner"></div>
          <div id="chips" class="chips"></div>
          <div id="chat" class="chat"></div>

          <div class="bar">
            <textarea id="input" placeholder="Try: a one-paragraph overview; two must-see pieces for a toy brand CMO; collaborators worth knowing; ‘show me something random’."></textarea>
          </div>
          <div class="bar">
            <div style="display:flex;gap:8px"><button id="send" class="primary">Send →</button><button id="reset" class="outline">Reset</button><button id="settings" class="outline">Settings</button></div>
            <div class="pill">* Absurd mode clearly labels invented bits.</div>
          </div>
        </div>
      </div>

      <aside style="display:flex;flex-direction:column;gap:12px">
        <div class="card">
          <div class="sub">About</div>
          <div><strong>Lars Jorgensen</strong> — Creative Director / ECD based in Lisbon, Portugal. Written site, not a circus; ideas first, craft second, confetti never.</div>
        </div>
        <div class="card">
          <div class="sub">Sources</div>
          <div id="sources"></div>
        </div>
        <div class="card">
          <div class="sub">Ideas to try</div>
          <div id="sugg" class="chips"></div>
        </div>
      </aside>
    </section>
  </main>

  <dialog id="settingsModal" style="border:none;border-radius:12px;padding:16px;width:520px;max-width:90%">
    <h3 style="margin:0 0 8px">Settings</h3>
    <p class="muted" style="margin:0 0 12px">Paste an OpenAI key (stored only in your browser). Optionally enable image search via Bing or Giphy keys (server-side recommended).</p>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
      <div>
        <div class="sub">OpenAI Key</div>
        <input id="apiKey" placeholder="sk-..." style="width:100%;padding:8px;border:1px solid var(--line);border-radius:10px;background:#0f0f12;color:var(--ink)">
      </div>
      <div>
        <div class="sub">Model</div>
        <input id="model" value="gpt-4o-mini" style="width:100%;padding:8px;border:1px solid var(--line);border-radius:10px;background:#0f0f12;color:var(--ink)">
      </div>
    </div>
    <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:12px"><button id="saveSettings" class="primary">Save</button><button id="closeSettings" class="outline">Close</button></div>
  </dialog>

  <script>
    const seed = {"name":"Lars Jorgensen","title":"Creative Director / ECD","location":"Lisbon, Portugal","emails":["larsandnikki@twoandahalfvikings.com"],"sources":[{"name":"Portfolio","url":"https://larsmarsjorgensen.com"},{"name":"KISS Studio","url":"https://keeptitstupidsimple.studio"},{"name":"Behance","url":"https://www.behance.net/larsmarsjorgensen"},{"name":"LinkedIn","url":"https://www.linkedin.com/in/larsmarsjorgensen"}],"voice":"Vonnegut×Adams: irreverent, humane, dry wit; concise single-paragraph answers."};

    const sugg = [
      "Give me a one-paragraph overview in your voice.",
      "Two
